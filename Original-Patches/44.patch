From: andi34 <skate4life@gmx.de>
Date: Sat, 12 Jul 2014 11:55:20 +0200
Subject: [PATCH] arch/arm/mach-omap2/board-espresso10-display.c: revert JB Update 1/3

diff --git a/arch/arm/mach-omap2/board-espresso10-display.c b/arch/arm/mach-omap2/board-espresso10-display.c
index f485fcb..d33fb4f 100644
--- a/arch/arm/mach-omap2/board-espresso10-display.c
+++ b/arch/arm/mach-omap2/board-espresso10-display.c
@@ -38,7 +38,6 @@
 #endif
 
 #define ESPRESSO10_FB_RAM_SIZE		SZ_16M	/* ~1280*720*4 * 2 */
-#define ESPRESSO10_FB1_RAM_SIZE		SZ_8M
 
 static struct ltn101al03_panel_data espresso10_panel_data = {
 	.panel_id = PANEL_SEC,
@@ -142,34 +141,13 @@ static struct omap_dss_board_info espresso10_dss_data = {
 	.default_device	= &espresso10_lcd_device,
 };
 
-static struct dsscomp_platform_data dsscomp_config_espresso = {
-	.tiler1d_slotsz = SZ_16M,
-};
-static struct sgx_omaplfb_config omaplfb_config_espresso[] = {
-	{
-		.tiler2d_buffers = 2,
-		.swap_chain_length = 2,
-	},
-	{
-		.vram_buffers = 2,
-		.swap_chain_length = 2,
-	},
-};
-static struct sgx_omaplfb_platform_data omaplfb_plat_data_espresso = {
-	.num_configs = ARRAY_SIZE(omaplfb_config_espresso),
-	.configs = omaplfb_config_espresso,
-};
-
 static struct omapfb_platform_data espresso10_fb_pdata = {
 	.mem_desc = {
-		.region_cnt = ARRAY_SIZE(omaplfb_config_espresso),
+		.region_cnt = 1,
 		.region = {
 			[0] = {
-				.size = ESPRESSO10_FB1_RAM_SIZE,
+				.size = ESPRESSO10_FB_RAM_SIZE,
 			},
-			[1] = {
-				.size = ESPRESSO10_FB1_RAM_SIZE,
-			}
 		},
 	},
 };
@@ -177,8 +155,8 @@ static struct omapfb_platform_data espresso10_fb_pdata = {
 void __init omap4_espresso10_memory_display_init(void)
 {
 	omap_android_display_setup(&espresso10_dss_data,
-				   &dsscomp_config_espresso,
-				   &omaplfb_plat_data_espresso,
+				   NULL,
+				   NULL,
 				   &espresso10_fb_pdata,
 				   get_omap_ion_platform_data());
 }
@@ -212,8 +190,6 @@ static __init int setup_current_panel(char *opt)
 }
 __setup("lcd_panel_id=", setup_current_panel);
 
-
-
 void __init omap4_espresso10_display_init(void)
 {
 	struct ltn101al03_panel_data *panel;
@@ -290,7 +266,5 @@ void __init omap4_espresso10_display_init(void)
 		/* LCD only */
 		espresso10_dss_data.num_devices = 1;
 
-	omapfb_set_platform_data(&espresso10_fb_pdata);
 	omap_display_init(&espresso10_dss_data);
 }
-
